@page "/agents/{id}"

@if (_isLoading)
{
    <MudSkeleton />
    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="20vw" Height="20vw" />
}
else
{
    <MudContainer Class="d-flex flex-column justify-center">
    <MudText Typo="Typo.h2" Align="Align.Center">@_response.Agent.DisplayName</MudText>
    <MudText Typo="Typo.h5" Align="Align.Center">@_response.Agent.Role.DisplayName</MudText>
    <MudItem Class="d-flex justify-center align-items-center" Style="width: 100%; height: auto;">
        <MudImage Src="@_response.Agent.Role.DisplayIcon.AbsoluteUri" Style="width: 5%; height: auto;" />
    </MudItem>

    <MudGrid Spacing="3" Justify="Justify.Center">
        <MudItem xs="6" Class="d-flex justify-center align-items-center">
            <MudImage Src="@_response.Agent.FullPortraitV2.AbsoluteUri" Style="width: 100%; height: 100%;" />
        </MudItem>
         <MudItem xs="6" Class=" d-flex flex-column align-center justify-start">
            @if (_response.Agent.Abilities.Count() > 4)
                {
                    <MudText Typo="Typo.h4" Align="Align.Center">Abilities</MudText>
                    <MudGrid>
                        @foreach (var ability in _response.Agent.Abilities.Where(a => a.Slot.ToString() != "Passive"))
                        {
                            <MudItem xs="3" Class="d-flex flex-column align-center justify-center">
                                <MudImage Src="@ability.DisplayIcon.AbsoluteUri" Style="width: 75%; height: auto;" />
                                <MudText Align="Align.Center">@ability.DisplayName</MudText>
                            </MudItem>
                        }
                    </MudGrid>
                    <MudText Typo="Typo.h4" Align="Align.Center">Passive</MudText>
                    @if(@_response.Agent.Abilities.Where(a => a.Slot.ToString() == "Passive").First().DisplayIcon == null)
                    {
                    <MudItem xs="3" Class="d-flex flex-column align-center justify-center">
                        <MudText Align="Align.Center" Typo="Typo.h5">@_response.Agent.Abilities.Where(a => a.Slot.ToString() == "Passive").First().DisplayName</MudText>
                    </MudItem>
                    }
                    else
                    {
                    <MudItem xs="3" Class="d-flex flex-column align-center justify-center">
                        <MudImage Src="@_response.Agent.Abilities.Where(a => a.Slot.ToString() == "Passive").First().DisplayIcon.AbsoluteUri" Style="width: 75%; height: auto;" />
                        <MudText Align="Align.Center">@_response.Agent.Abilities.Where(a => a.Slot.ToString() == "Passive").First().DisplayName</MudText>
                    </MudItem>
                    }
                }
                else
                {
                    <MudText Typo="Typo.h4" Align="Align.Center">Abilities</MudText>
                    <MudGrid>
                        @foreach (var ability in _response.Agent.Abilities)
                        {
                            <MudItem xs="3" Class="d-flex flex-column align-center justify-center">
                                <MudImage Src="@ability.DisplayIcon.AbsoluteUri" Style="width: 75%; height: auto;" />
                                <MudText Align="Align.Center">@ability.DisplayName</MudText>
                            </MudItem>
                        }
                    </MudGrid>
                }
            </MudItem>
        </MudGrid>
    </MudContainer>
}